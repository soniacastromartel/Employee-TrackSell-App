{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { LOADING_CONTENT, NO_DATA_FAQ, MAX_TIME_LOADING, MIN_VERSION_APP, EMPTY_STRING } from '../../app.constants';\nimport { InfoFAQComponent } from '../info-faq/info-faq.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/notifications.service\";\nimport * as i2 from \"../../services/datacheck.service\";\nimport * as i3 from \"../../services/utils.service\";\nimport * as i4 from \"../../services/employee.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@ionic/angular\";\nconst _c0 = [\"content\"];\nconst _c1 = [\"search\"];\nfunction FaqComponent_ng_container_12_ion_list_2_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 19)(1, \"ion-segment-button\", 20);\n    i0.ɵɵlistener(\"click\", function FaqComponent_ng_container_12_ion_list_2_ion_item_1_Template_ion_segment_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const i_r8 = i0.ɵɵnextContext().index;\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.openOptFAQ(i_r8));\n    });\n    i0.ɵɵelement(2, \"ion-icon\", 21);\n    i0.ɵɵelementStart(3, \"ion-note\", 22);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const i_r8 = i0.ɵɵnextContext().index;\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"name\", ctx_r9.optionsShow[i_r8] == null ? null : ctx_r9.optionsShow[i_r8].ic);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r9.optionsShow[i_r8] == null ? null : ctx_r9.optionsShow[i_r8].categoria);\n  }\n}\nfunction FaqComponent_ng_container_12_ion_list_2_div_2_ion_chip_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-chip\", 24);\n    i0.ɵɵlistener(\"click\", function FaqComponent_ng_container_12_ion_list_2_div_2_ion_chip_1_Template_ion_chip_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r18);\n      const question_r16 = restoredCtx.$implicit;\n      const i_r8 = i0.ɵɵnextContext(2).index;\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r17.showQuestion(question_r16, i_r8));\n    });\n    i0.ɵɵelementStart(1, \"ion-note\", 25);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const question_r16 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(question_r16 == null ? null : question_r16.pregunta);\n  }\n}\nfunction FaqComponent_ng_container_12_ion_list_2_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, FaqComponent_ng_container_12_ion_list_2_div_2_ion_chip_1_Template, 3, 1, \"ion-chip\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r8 = i0.ɵɵnextContext().index;\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r10.optionsShow[i_r8] == null ? null : ctx_r10.optionsShow[i_r8].data);\n  }\n}\nfunction FaqComponent_ng_container_12_ion_list_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-list\");\n    i0.ɵɵtemplate(1, FaqComponent_ng_container_12_ion_list_2_ion_item_1_Template, 5, 2, \"ion-item\", 17);\n    i0.ɵɵtemplate(2, FaqComponent_ng_container_12_ion_list_2_div_2_Template, 2, 1, \"div\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r8 = ctx.index;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r6.optionsShow[i_r8] == null ? null : ctx_r6.optionsShow[i_r8].hidden));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.optCtrl[i_r8]);\n  }\n}\nfunction FaqComponent_ng_container_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 15);\n    i0.ɵɵtemplate(2, FaqComponent_ng_container_12_ion_list_2_Template, 3, 2, \"ion-list\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.optionsShow);\n  }\n}\nfunction FaqComponent_ng_template_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"ion-img\", 26);\n    i0.ɵɵelementStart(2, \"ion-label\", 27);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r4.noData);\n  }\n}\nfunction FaqComponent_ion_segment_button_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-segment-button\", 2);\n    i0.ɵɵlistener(\"click\", function FaqComponent_ion_segment_button_16_Template_ion_segment_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.reUpdatingApp());\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 28)(2, \"br\");\n    i0.ɵɵtext(3, \"ACTUALIZACI\\u00D3N PENDIENTE \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let FaqComponent = /*#__PURE__*/(() => {\n  class FaqComponent {\n    constructor(notification, checkSvc, utils, employeeSvc) {\n      this.notification = notification;\n      this.checkSvc = checkSvc;\n      this.utils = utils;\n      this.employeeSvc = employeeSvc;\n      // Control de seccion de tipo de pregunta\n      this.optCtrl = [false, false, false, false, false, false];\n      // Info empty view\n      this.noData = NO_DATA_FAQ;\n      /**\n       * Preguntas y respuestas a mostrar\n       */\n      this.optionsFAQ = [];\n      this.optionsShow = [];\n    }\n    /**\n     * Se recoge la version actual de la app\n     * y se cargan el contenido\n     */\n    ngOnInit() {\n      return __awaiter(this, void 0, void 0, function* () {\n        if (this.utils.version !== undefined) {\n          this.version = this.utils.version;\n        } else {\n          yield this.utils.getVersionApp().then(version => {\n            this.version = version + '';\n          }).catch(() => {\n            this.version = MIN_VERSION_APP;\n          });\n        }\n        this.notification.loadingData(LOADING_CONTENT);\n        this.utils.controlToNotifications(MAX_TIME_LOADING);\n        this.subcriptionFAQ = (yield this.checkSvc.getOptionsFAQ()).subscribe(result => {\n          var _a;\n          if (result !== undefined) {\n            this.optionsFAQ = result.data;\n            (_a = this.optionsFAQ) === null || _a === void 0 ? void 0 : _a.forEach(element => {\n              this.categorizeFAQ(element, false);\n            });\n          }\n          this.notification.cancelLoad();\n          this.utils.cancelControlNotifications();\n        });\n      });\n    }\n    ionViewWillEnter() {\n      // Mostrar opcion descarga actualizacion en FAQ?\n      this.isShowPendingUpdate = this.employeeSvc.employee !== undefined && this.utils.pendingUpdate;\n    }\n    /**\n     * Gestión de secciones de preguntas\n     *\n     * @param opt opción de usuario\n     */\n    openOptFAQ(opt) {\n      var _a;\n      return __awaiter(this, void 0, void 0, function* () {\n        for (let x = 0; x < this.optCtrl.length; x++) {\n          if (x === opt) {\n            if (this.optCtrl[opt]) {\n              this.optCtrl[opt] = false;\n            } else {\n              this.optCtrl[opt] = true;\n            }\n            if (this.optionsShow[opt].ic === 'add-circle') {\n              this.optionsShow[opt].ic = 'remove-circle';\n            } else {\n              this.optionsShow[opt].ic = 'add-circle';\n            }\n          } else {\n            this.optCtrl[x] = false;\n            if (this.optionsShow[x] !== undefined) {\n              this.optionsShow[x].ic = 'add-circle';\n            }\n          }\n        }\n        const yOffset = (_a = document.getElementById('questionFAQ')) === null || _a === void 0 ? void 0 : _a.offsetHeight;\n        // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n        opt < 2 ? this.content.scrollByPoint(0, yOffset + 20, 1500) : this.content.scrollByPoint(0, yOffset + 180, 1500);\n      });\n    }\n    /**\n     * Reset icon default\n     */\n    resetValues() {\n      for (let x = 0; x < this.optCtrl.length; x++) {\n        this.optCtrl[x] = false;\n        this.optionsFAQ[x].ic = 'add-circle';\n      }\n    }\n    /**\n     * Alert con pregunta y respuesta\n     *\n     * @param question Pregunta seleccionada\n     * @param posCategory Categoria seleccionada\n     *\n     */\n    showQuestion(question, posCategory) {\n      this.notification.showQuestionFAQ(InfoFAQComponent, this.optionsShow[posCategory].categoria, question.pregunta.toUpperCase(), question.respuesta, question.images);\n    }\n    /**\n     * Gestión de búsqueda en FAQ\n     */\n    userSearching() {\n      if (this.timeOutSearch !== undefined) {\n        clearTimeout(this.timeOutSearch);\n      }\n      const search = this.search.value;\n      if (search !== EMPTY_STRING) {\n        this.resetValues();\n        this.optionsShow = [];\n        const exclude = [];\n        this.optionsFAQ.forEach(r => {\n          // Si existe la información se desoculta el grupo\n          if (r.categoria.toUpperCase().includes(search.toUpperCase()) || r.pregunta.toUpperCase().includes(search.toUpperCase())) {\n            this.categorizeFAQ(r, false);\n            exclude.push(r.categoria);\n            // Comprobacion ocurrencias encontradas\n            const existe = this.optionsShow.filter(reg => reg.categoria === r.categoria);\n            existe.forEach(element => {\n              element.hidden = false;\n            });\n          } else {\n            // En caso contrario se recategorizan y se ocultan\n            if (!exclude.includes(r.categoria)) {\n              this.categorizeFAQ(r, true);\n            }\n          }\n        });\n      }\n      this.timeOutSearch = setTimeout(() => {\n        if (search === '') {\n          this.cancelSearch();\n        }\n      }, 5000);\n    }\n    /**\n     * Categoriza los tipos de preguntas para el FAQ\n     *\n     * @param element Elemento a comprobar\n     */\n    categorizeFAQ(element, status) {\n      const code = element.code + ''.split('.');\n      if (this.optionsShow[code[0]] === undefined) {\n        this.optionsShow[code[0]] = {\n          code: element.code,\n          ic: element.ic,\n          hidden: status,\n          categoria: element.categoria,\n          data: [{\n            pregunta: element.pregunta,\n            respuesta: element.respuesta,\n            images: element.images\n          }]\n        };\n      } else {\n        this.optionsShow[code[0]].data.push({\n          pregunta: element.pregunta,\n          respuesta: element.respuesta,\n          images: element.images\n        });\n      }\n    }\n    /**\n     * Cancelar búsqueda\n     */\n    cancelSearch() {\n      this.optionsShow = [];\n      this.resetValues();\n      this.optionsFAQ.forEach(reg => {\n        this.categorizeFAQ(reg, false);\n      });\n    }\n    /**\n     * Back. Cierra la ventana modal y vuelve al componente principal\n     */\n    backFAQ() {\n      this.notification.closeModal();\n    }\n    /**\n     * Descarga de actualizacion pospuesta\n     * por parte del usuario\n     */\n    reUpdatingApp() {\n      this.utils.downloadingUpdate(false);\n    }\n  }\n  FaqComponent.ɵfac = function FaqComponent_Factory(t) {\n    return new (t || FaqComponent)(i0.ɵɵdirectiveInject(i1.NotificationsService), i0.ɵɵdirectiveInject(i2.DatacheckService), i0.ɵɵdirectiveInject(i3.UtilsService), i0.ɵɵdirectiveInject(i4.EmployeeService));\n  };\n  FaqComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: FaqComponent,\n    selectors: [[\"app-faq\"]],\n    viewQuery: function FaqComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.content = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.search = _t.first);\n      }\n    },\n    decls: 21,\n    vars: 4,\n    consts: [[1, \"ion-no-border\"], [\"slot\", \"start\"], [3, \"click\"], [\"name\", \"arrow-back-circle\", \"color\", \"light\", \"size\", \"large\"], [1, \"searchContainer\"], [\"debounce\", \"800\", \"placeholder\", \"Su b\\u00FAsqueda aqu\\u00ED\", 3, \"ionChange\", \"ionCancel\", \"ionClear\"], [\"search\", \"\"], [\"content\", \"\"], [4, \"ngIf\", \"ngIfElse\"], [\"emptyFaq\", \"\"], [1, \"containerVersion\"], [3, \"click\", 4, \"ngIf\"], [1, \"separator\"], [\"src\", \"assets/imgs/logo.png\", 1, \"logoVersion\"], [1, \"versionApp\"], [1, \"containerFAQ\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"sectionFAQ\", \"lines\", \"none\", 4, \"ngIf\"], [4, \"ngIf\"], [\"lines\", \"none\", 1, \"sectionFAQ\"], [\"id\", \"questionFAQ\", 3, \"click\"], [1, \"icFaq\", 3, \"name\"], [1, \"baseOpt\"], [\"class\", \"question\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"question\", 3, \"click\"], [1, \"resOpt\"], [\"src\", \"assets/imgs/nodata.png\", 1, \"emptyView\"], [1, \"emptyDataLbl\"], [\"name\", \"warning\", \"size\", \"large\", 1, \"icUpdate\"]],\n    template: function FaqComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-buttons\", 1)(3, \"ion-button\", 2);\n        i0.ɵɵlistener(\"click\", function FaqComponent_Template_ion_button_click_3_listener() {\n          return ctx.backFAQ();\n        });\n        i0.ɵɵelement(4, \"ion-icon\", 3);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"p\");\n        i0.ɵɵtext(6, \" PREGUNTAS FRECUENTES \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\", 4)(8, \"ion-searchbar\", 5, 6);\n        i0.ɵɵlistener(\"ionChange\", function FaqComponent_Template_ion_searchbar_ionChange_8_listener() {\n          return ctx.userSearching();\n        })(\"ionCancel\", function FaqComponent_Template_ion_searchbar_ionCancel_8_listener() {\n          return ctx.cancelSearch();\n        })(\"ionClear\", function FaqComponent_Template_ion_searchbar_ionClear_8_listener() {\n          return ctx.cancelSearch();\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(10, \"ion-content\", null, 7);\n        i0.ɵɵtemplate(12, FaqComponent_ng_container_12_Template, 3, 1, \"ng-container\", 8);\n        i0.ɵɵtemplate(13, FaqComponent_ng_template_13_Template, 4, 1, \"ng-template\", null, 9, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 10);\n        i0.ɵɵtemplate(16, FaqComponent_ion_segment_button_16_Template, 4, 0, \"ion-segment-button\", 11);\n        i0.ɵɵelement(17, \"hr\", 12)(18, \"ion-img\", 13);\n        i0.ɵɵelementStart(19, \"ion-label\", 14);\n        i0.ɵɵtext(20);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        const _r3 = i0.ɵɵreference(14);\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"ngIf\", ctx.optionsFAQ !== undefined)(\"ngIfElse\", _r3);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.isShowPendingUpdate);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\"VERSI\\u00D3N \", ctx.version, \"\");\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i6.IonButton, i6.IonButtons, i6.IonChip, i6.IonContent, i6.IonHeader, i6.IonIcon, i6.IonImg, i6.IonItem, i6.IonLabel, i6.IonList, i6.IonNote, i6.IonSearchbar, i6.IonSegmentButton, i6.IonToolbar, i6.TextValueAccessor],\n    styles: [\"@media (min-width: 320px) and (max-width: 767px){.baseOpt[_ngcontent-%COMP%]{font-size:small;font-weight:700;color:var(--ion-color-myblack);margin:1em;display:block;text-align:center}.resOpt[_ngcontent-%COMP%]{width:100%!important;text-align:center;font-size:small;font-weight:700;color:var(--ion-color-myblack);margin:2em}}@media (min-width: 768px) and (max-width: 1280px){.baseOpt[_ngcontent-%COMP%]{font-size:large;font-weight:700;color:var(--ion-color-myblack);margin:1em;display:block;text-align:center}.resOpt[_ngcontent-%COMP%]{width:100%!important;text-align:center;font-size:large;font-weight:700;color:var(--ion-color-myblack);margin:2em}}@media (min-width: 1281px){.baseOpt[_ngcontent-%COMP%]{font-size:large;font-weight:700;color:var(--ion-color-myblack);margin:1em;display:block;text-align:center}.resOpt[_ngcontent-%COMP%]{width:100%!important;text-align:center;font-size:large;font-weight:700;color:var(--ion-color-myblack);margin:2em}}ion-toolbar[_ngcontent-%COMP%]{--background: var(--ion-color-icot)}ion-searchbar[_ngcontent-%COMP%]{--icon-color: var(--ion-color-icot);--clear-button-color: var(--ion-color-icot);color:var(--ion-color-icot);font-weight:700;width:100%;--placeholder-color: var(--ion-color-icot)}ion-chip[_ngcontent-%COMP%]{border:2px solid var(--ion-color-icot);margin:10px}ion-note[_ngcontent-%COMP%]{margin:16px}ion-label[_ngcontent-%COMP%]{font-weight:700;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}p[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;text-align:center}b[_ngcontent-%COMP%]{--color: var(--ion-color-icot)}hr[_ngcontent-%COMP%]{height:2px}ion-item[_ngcontent-%COMP%]{border:0%!important;padding:0%!important}ion-segment-button[_ngcontent-%COMP%]{font-weight:900;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}.icFaq[_ngcontent-%COMP%]{color:var(--ion-color-icot)}.searchContainer[_ngcontent-%COMP%]{background-color:var(white)}.separator[_ngcontent-%COMP%]{height:3px;margin-left:16px;margin-right:16px;margin-top:16px;background:var(--ion-color-icot)}.containerVersion[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif;font-size:small;margin-bottom:10px}.logoVersion[_ngcontent-%COMP%]{width:50px;height:50px;margin-left:auto;margin-right:auto;margin-bottom:5px}.question[_ngcontent-%COMP%]{width:90%!important;text-align:center!important;font-size:small;font-weight:700;font-family:monospace;color:#000;padding-top:3.2em;padding-bottom:3.2em}.containerQuestion[_ngcontent-%COMP%]{border:5px solid yellow}.containerFAQ[_ngcontent-%COMP%]{margin:0;padding:0}.sectionFAQ[_ngcontent-%COMP%]{height:75px}.arrow_policy[_ngcontent-%COMP%]{float:right;margin-left:.5em;margin-right:.5em}.info_pp[_ngcontent-%COMP%]{font-size:small;text-align:center;font-weight:900;margin:0;color:var(--ion-color-icot)}.emptyDataLbl[_ngcontent-%COMP%]{display:block;text-align:center}.versionApp[_ngcontent-%COMP%]{color:var(--ion-color-myblack)}.icUpdate[_ngcontent-%COMP%]{color:var(--ion-color-icot);animation-name:_ngcontent-%COMP%_alerting;animation-duration:4s;animation-iteration-count:infinite}@keyframes _ngcontent-%COMP%_alerting{25%{opacity:15%}75%{opacity:100%}}\"]\n  });\n  return FaqComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}